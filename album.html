<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Album</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Universal Back Button styles (brown theme) */
.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  background: #754c21;
  color: #fff;
  padding: 12px 18px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 700;
  font-size: 17px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.25);
  transition: background 0.18s ease, transform 0.12s ease;
  z-index: 2147483647; /* very high so it stays on top */
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* hover/tap effect */
.back-btn:hover {
  background: #5a3818;
  transform: translateY(-3px);
}

/* circular variant: add class "round" */
.back-btn.round {
  width: 48px;
  height: 48px;
  padding: 0;
  border-radius: 50%;
  font-size: 22px;
}

/* optional smaller mobile sizing */
@media (max-width: 480px) {
  .back-btn { top: 14px; left: 12px; padding: 16px 24px; font-size: 20px; }
  .back-btn.round { width: 52px; height: 52px; font-size: 24px; }
}

        /* Album specific styles */
        .album-container {
            max-width: 1200px;
            width: 100%;
            padding: 20px;
            background: #fff;
            border: 2px solid #754c21;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            margin: 20px auto;
            position: relative;
        }

        .album-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .album-header h1 {
            color: #754c21;
            font-size: 28px;
        }

        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
        }

        .add-memory-btn {
            background: #754c21;
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .add-memory-btn:hover {
            background: #a87340;
        }

        .add-memory-top {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .edit-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: #754c21;
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .edit-btn:hover {
            background: #a87340;
        }

        .polaroid {
            background: #fff;
            border: 2px solid #754c21;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: relative;
            cursor: move;
            aspect-ratio: 4 / 5;
            display: flex;
            flex-direction: column;
        }

        .polaroid img {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            border-radius: 4px;
        }

        .polaroid-info {
            margin-top: 10px;
        }

        .polaroid-caption {
            text-align: center;
            font-size: 14px;
            color: #754c21;
            margin-bottom: 5px;
        }

        .polaroid-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #666;
        }

        .social-controls {
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .like-btn {
            background: #754c21;
            color: #fff;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .like-btn:hover {
            background: #a87340;
        }

        .like-btn.liked {
            background: #d9534f;
        }

        .edit-mode .polaroid {
            opacity: 0.6;
        }

        .edit-controls {
            display: none;
            flex-direction: column;
            gap: 5px;
            align-items: center;
        }

        .edit-mode .edit-controls {
            display: flex;
        }

        .edit-controls button {
            background: #754c21;
            color: #fff;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }

        .edit-controls button:hover {
            background: #a87340;
        }

        .edit-mode {
            background: rgba(0,0,0,0.5);
        }

        .upload-input {
            display: none;
        }
    </style>
</head>
<body>
    <a href="#" class="back-btn" onclick="navigateBack()">‚Üê Back</a>
    <div class="album-container">
        <div class="album-header">
            <h1>Our Album</h1>
        </div>
        <div id="album-content">
            <!-- Empty state or pictures will be here -->
        </div>
    </div>

    <button id="edit-btn" class="edit-btn">Edit</button>

    <script>
    // Check login
    const currentUser = localStorage.getItem('currentUser');
    if (!currentUser) {
      window.location.href = 'login.html';
    }

    // Add logout button
    const logoutBtn = document.createElement('a');
    logoutBtn.href = '#';
    logoutBtn.className = 'back-btn';
    logoutBtn.style.top = '20px';
    logoutBtn.style.right = '20px';
    logoutBtn.style.left = 'auto';
    logoutBtn.textContent = 'Logout';
    logoutBtn.onclick = function() {
      localStorage.removeItem('currentUser');
      localStorage.removeItem('userData');
      window.location.href = 'login.html';
    };
    document.body.appendChild(logoutBtn);

    // Display username
    const userDisplay = document.createElement('div');
    userDisplay.style.position = 'fixed';
    userDisplay.style.top = '20px';
    userDisplay.style.left = '100px';
    userDisplay.style.color = '#754c21';
    userDisplay.style.fontWeight = 'bold';
    userDisplay.style.fontSize = '18px';
    userDisplay.textContent = `Welcome, ${currentUser}!`;
    document.body.appendChild(userDisplay);

    // Navigation function that preserves music state
    window.navigateBack = function() {
        // Save current music state before navigating
        const audio = document.getElementById('audio');
        if (audio && !audio.paused) {
            // Music is playing, save state
            const state = {
                track: window._GLOBAL_PLAYLIST ? window._GLOBAL_PLAYLIST.findIndex(s => s.src === audio.src) : 0,
                time: audio.currentTime,
                playing: true
            };
            localStorage.setItem('playerState', JSON.stringify(state));
        }
        // Navigate to home
        window.location.href = 'home.html';
    };
    </script>
    <script src="js/main.js"></script>
    <script src="js/album.js"></script>
</body>
</html>